---
output:
  pdf_document:
    fig_caption: yes
    keep_tex: yes
header-includes: \usepackage{float}
---

\begin{centering}

\vspace*{5 cm}

\Huge

{\bf Introducción a Python}

\vspace{3 cm}

\Large
Marco Andrés Vázquez Hernández

\vspace{1 cm}
\normalsize
Práctica 2. 

Agosto de 2018

\normalsize
Instituto Politécnico Nacional


\end{centering}

\newpage



```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


# Descripción

1. Leer el archivo "TodasLasNoticias.csv" y pasarlo a un archivo JSON. El objeto contendrá una lista con un diccionario por cada posición, donde cada diccionario tendrá cinco llaves: I Fecha, II Título, III url IV Descripción, V Categoría

2. Guardar el archivo JSON con el nombre "noticias.json"

Imágen del código:

\begin{figure}[htbp]
\centering
\includegraphics{practica2py.png}
\end{figure} 

Ejecución del código:

\begin{figure}[htbp]
\centering
\includegraphics{practica2pyex.png}
\end{figure} 

\newpage

# Endpoint

3. Hacer un endpoint que reciba una petición de tipo GET con el parámetro "categoría" para que retorne las noticias correspondientes al parámetro dado.

El código para esto es:

\begin{figure}[htbp]
\centering
\includegraphics{endpointpy.png}
\end{figure} 

Para la creación de un endpoint se tiene que tener instalado pip, flask y virtualenv y otros requisitos:

```bash
sudo yum install python-pip python-devel gcc nginx
sudo yum install python34-setuptools
sudo easy_install-3.4 pip
sudo pip3 install flask
sudo pip install virtualenv

```

Despues se crea una instancia virtual de Python para el proyecto endpoint.py:

```bash
sudo virtualenv endpointenv

```

NOTA: Para el caso de Vagrant sobre Windows, el entorno virtual sólo se puede crear sobre /.
También se tiene que configurar el archivo Vagrantfile tal que contenga la siguiente linea:

```bash
config.vm.network "forwarded_port", guest: 8080, host: 8080

```

La ejecución del código:

\begin{figure}[htbp]
\centering
\includegraphics{endpointpyex.png}
\end{figure} 

\newpage

Para probar que el servicio funciona se puede ejecutar el comando:

```bash
 curl -i -X GET http://localhost:8080/getData/Yucatan | head -n 30

```

Nota: Usar tmux.

Debe de arrojar:

\begin{figure}[htbp]
\centering
\includegraphics{getcommand.png}
\end{figure} 

\newpage

Desde un navegador también se debe poder checar bajo la dirección http://localhost:8080/getData/<Categoria>:

\begin{figure}[htbp]
\centering
\includegraphics{getweb.png}
\end{figure} 

Nota: Para una aplicación flask desde una maquina virtual de Vagrant sobre Windows hay configuraciones adicionales y posibles bugs que aquí no se detallan.
